/**
 * jquery.pwstrength http://matoilic.github.com/jquery.pwstrength
 *
 * @version v0.1.1
 * @author Mato Ilic <info@matoilic.ch>
 * @copyright 2013 Mato Ilic
 *
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 */
(function($) {
    function updateStrengthIndicator(passwordField, indicator, texts, classes) {
        var password = passwordField.val();
        var strength = $.pwstrength(password);
        indicator.text(texts[strength]).removeClass(classes.join(' ')).addClass(classes[strength]);
    }

    $.pwstrength = function(password) {
        // Logique de calcul de la force du mot de passe...
        // Retourne un nombre entre 0 et 4 (dans cet exemple simplifié)
        return Math.floor(Math.random() * 5);
    };

    $.fn.pwstrength = function(options) {
        options = $.extend({
            classes: ['pw-very-weak', 'pw-weak', 'pw-mediocre', 'pw-strong', 'pw-very-strong'],
            texts: ['très faible', 'faible', 'médiocre', 'fort', 'très fort']
        }, options);

        return this.each(function() {
            var $this = $(this);
            var indicator = $('<span>').insertAfter($this);

            $this.keyup(function() {
                updateStrengthIndicator($this, indicator, options.texts, options.classes);
            });
        });
    };
})(jQuery);
